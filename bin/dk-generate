#!/usr/bin/env python2

import sys, optparse

from deploymentkit import core, archlinux

if __name__ == '__main__':

    parser = optparse.OptionParser(usage="Usage: %prog [options] FILE.yaml")
    parser.add_option("-t", "--target", dest="target", default="",
                      help="Target platform to generate for", metavar="TARGET")
    parser.add_option("-o", "--output-directory", dest="output_dir", default="./",
                      help="Directory to output generated files to", metavar="DIR")

    (options, args) = parser.parse_args()

    if len(args) < 1:
        parser.error("No input file specified")
    elif len(args) > 1:
        parser.error("Too many arguments")

    input_file = args[0]

    core.generate_recipe(input_file, options.output_dir, options.target)
